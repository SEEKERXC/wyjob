<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>resume</title>
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../css/resume.css">
	<script src="../js/jquery-3.3.1.min.js"></script>
	<script src="../js/dropdown.js"></script>
	<script src="../js/resume.js"></script>
	<script src="../js/all_ajax.js"></script>
	<link rel="stylesheet" href="//apps.bdimg.com/libs/jqueryui/1.10.4/css/jquery-ui.min.css">
	<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
</head>
<body>
	<div id="header">
		<div class="inner">
			<img src="../img/logo.png" alt="" id="logo">
			<a href="front" class="nav-a">职位搜索</a>
			<a href="resumePage" class="nav-a focus-a">我的简历</a>
			<a href="recommendPage" class="nav-a">职位推荐</a>
			<a href="applicationPage" class="nav-a">我的申请</a>
			<span class="fr user">HELLO,CHAOXX</span>
			<a href="loginPage" class="fr none login-a">登录/注册</a>
			<img src="../img/people.png" alt="" class="fr people">
		</div>		
	</div>
	<div id="main">
		<div class="inner">
			<div class="info-section" id="info-person">
				<h3 class="title">个人信息</h3>
				<div class="form-row">
					<dl>
						<dt>姓名</dt>
						<dd><input type="text" class="ipt"></dd>
					</dl>
					<dl>
						<dt>当前的求职状态</dt>
						<dd>
							<span class="dropdown-select">
								<img src="../img/pull.png" alt="" class="icon-select-arrow">
								<input value="在职-暂不考虑" type="text" class="ipt" placeholder="请选择" readonly="">
							</span>
							<div class="dropdown-menu">
			                    <ul>
			                        <li>离职-随时到岗</li>
			                        <li>在职-暂不考虑</li>
			                        <li>在职-考虑机会</li>
			                    </ul>
			                </div>
						</dd>
					</dl>
				</div>
				<div class="form-row">
					<dl>
						<dt>性别</dt>
						<dd>
							<button class="gender-btn">男</button>
							<button class="gender-btn focus-btn">女</button>
						</dd>
					</dl>
					<dl>
						<dt>居住地</dt>
						<dd>
							<input type="text" class="small-ipt" placeholder="省份">
							<input type="text" class="small-ipt" placeholder="城市">
						</dd>
					</dl>
				</div>
				<div class="form-row">
					<dl>
						<dt>出生日期</dt>
						<dd><input type="text" class="ipt" readonly></dd>
					</dl>
					<dl>
						<dt>手机号码</dt>
						<dd><input type="text" class="ipt"></dd>
					</dl>
				</div>
				<div class="form-row">
					<dl>
						<dt>电子邮箱</dt>
						<dd><input type="text" class="ipt"></dd>
					</dl>
				</div>
			</div>
			<div  class="info-section" id="info-experience">
				<h3 class="title">
					教育经历
					<a class="add-btn fr" id="education-btn"><img src="../img/add.png" alt="">添加</a>
				</h3>
			</div>
			<div class="info-section" id="info-work">
				<h3 class="title">
					工作经历
					<a id="work-btn" class="add-btn fr"><img src="../img/add.png" alt="">添加</a>
				</h3>
			</div>
			<div class="info-section" id="info-skill">
				<h3 class="title">
					专业技能
					<a id ="expertise-btn" class="add-btn fr"><img src="../img/add.png" alt="">添加</a>
				</h3>
			</div>
			<div class="info-section" id="info-language">
				<h3 class="title">
					语言能力
					<a id="language-btn" class="add-btn fr"><img src="../img/add.png" alt="">添加</a>
				</h3>
			</div>
			<div class="info-section">
				<h3 class="title">求职意向</h3>
				<div class="form-row">
					<dl>
						<dt>最低接受薪资</dt>
						<dd><input type="text" class="ipt"></dd>
					</dl>
					<dl>
						<dt>期望工作性质</dt>
						<dd>
							<span class="dropdown-select">
								<img src="../img/pull.png" alt="" class="icon-select-arrow">
								<input value="全职" type="text" class="ipt" placeholder="请选择" readonly="">
							</span>
							<div class="dropdown-menu">
			                    <ul>
			                        <li>全职</li>
			                        <li>兼职</li>
			                        <li>实习</li>
			                    </ul>
			                </div>
						</dd>
					</dl>
				</div>
				<div class="form-row">
					<dl>
						<dt><a href="javascript:;" id="bias-btn"><img src="../img/add.png" alt="">添加具体意向</a></dt>
					</dl>
					<div class="form-line">
						<span>北京</span>
						<em class="vline"></em>
						<span>计算机软件</span>
						<em class="vline"></em>
						<span>软件工程师</span>
						<a class="delete-btn fr">删除</a>
					</div>
					<div class="form-line">
						<span>北京</span>
						<em class="vline"></em>
						<span>计算机软件</span>
						<em class="vline"></em>
						<span>软件工程师</span>
						<a class="delete-btn fr">删除</a>
					</div>
				</div>
			</div>
			<button class="cancel-btn" style="margin-left: 680px;" onclick="location='../html/resume_info.html'">取消</button>
			<button class="ok-btn">确定</button>
		</div>
	</div>
	<div id="foot">
		<div class="inner">
			<span>51JOB招聘平台 版权所有 Copyright © 2004-2018 All Rights Reserved</span>
		</div>
	</div>


	<div class="shade none" id="add-education">
		<div class="wrap">
			<div class="form">
				<span class="title">添加教育经历</span>
				<dl>
					<dt>时间</dt>
					<dd>
						<input type="text" class="ipt small-ipt" placeholder="开始时间" readonly>
						<input type="text" class="ipt small-ipt" placeholder="结束时间" readonly>
					</dd>
				</dl>
				<dl>
					<dt>学校名称</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<dt>专业名称</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<button class="cancel-btn">取消</button>
					<button class="ok-btn">确定</button>
				</dl>
			</div>
		</div>
	</div>
	<div class="shade none" id="add-language">
		<div class="wrap">
			<div class="form">
				<span class="title">添加语言能力</span>
				<dl>
					<dt>语种</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="英语" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>英语</li>
		                        <li>日语</li>
		                        <li>韩语</li>
		                        <li>阿拉伯语</li>
		                        <li>俄语</li>
		                        <li>德语</li>
		                        <li>西班牙语</li>
		                        <li>泰语</li>
		                        <li>法语</li>
								<li>意大利语</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<dt>读写能力</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="一般" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>一般</li>
		                        <li>良好</li>
		                        <li>熟练</li>
		                        <li>精通</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<dt>听说能力</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="一般" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>一般</li>
		                        <li>良好</li>
		                        <li>熟练</li>
		                        <li>精通</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<button class="cancel-btn">取消</button>
					<button class="ok-btn">确定</button>
				</dl>
			</div>
		</div>
	</div>
	<div class="shade none" id="add-expertise">
		<div class="wrap">
			<div class="form">
				<span class="title">添加专业技能</span>
				<dl>
					<dt>技能名称</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="JavaScript" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>SQL</li>
		                        <li>Java</li>
		                        <li>C/C++</li>
		                        <li>HTML5</li>
		                        <li>PHP</li>
		                        <li>Python</li>
		                        <li>Linux</li>
		                        <li>JavaScript</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<dt>使用时间</dt>
					<dd><input type="text" class="ipt"></dd>
				</dl>
				<dl>
					<dt>掌握程度</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="一般" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>一般</li>
		                        <li>良好</li>
		                        <li>熟练</li>
		                        <li>精通</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<button class="cancel-btn">取消</button>
					<button class="ok-btn">确定</button>
				</dl>
			</div>
		</div>
	</div>
	<div class="shade none" id="add-bias">
		<div class="wrap">
			<div class="form">
				<span class="title">添加具体意向</span>
				<dl>
					<dt>工作地点</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<dt>行业</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<dt>职能</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="软件工程师" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>软件工程师</li>
		                        <li>算法工程师</li>
		                        <li>需求工程师</li>
		                        <li>系统分析员</li>
		                        <li>项目经理</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<button class="cancel-btn">取消</button>
					<button class="ok-btn">确定</button>
				</dl>
			</div>
		</div>
	</div>
	<div class="shade none" id="add-work">
		<div class="wrap big-wrap">
			<div class="form big-form">
				<span class="title">添加工作经历</span>
				<dl>
					<dt>时间</dt>
					<dd>
						<input type="text" class="ipt small-ipt" placeholder="开始时间" readonly>
						<input type="text" class="ipt small-ipt" placeholder="结束时间" readonly	>
					</dd>
				</dl>
				<dl>
					<dt>公司名称</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<dt>企业类型</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="国企" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>国企</li>
		                        <li>合资</li>
		                        <li>私企</li>
		                        <li>事业单位</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<dt>公司规模</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="<50" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li><50</li>
		                        <li>51-100</li>
		                        <li>101-500</li>
		                        <li>500-1000</li>
		                        <li>1000-5000</li>
		                        <li>5000+</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<dt>行业</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<dt>职能</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="软件工程师" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>软件工程师</li>
		                        <li>算法工程师</li>
		                        <li>需求工程师</li>
		                        <li>系统分析员</li>
		                        <li>项目经理</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl>
					<dt>职位</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<dt>月薪</dt>
					<dd><input type="text" class="ipt" placeholder=""></dd>
				</dl>
				<dl>
					<dt>工作类型</dt>
					<dd>
						<span class="dropdown-select">
							<img src="../img/pull.png" alt="" class="icon-select-arrow">
							<input value="全职" type="text" class="ipt" placeholder="请选择" readonly="">
						</span>
						<div class="dropdown-menu">
		                    <ul>
		                        <li>全职</li>
		                        <li>兼职</li>
		                        <li>实习</li>
		                    </ul>
		                </div>
		            </dd>
				</dl>
				<dl class="info-textarea">
					<dt>工作描述</dt>
					<dd><textarea></textarea></dd>
				</dl>
				<button class="cancel-btn">取消</button>
				<button class="ok-btn">确定</button>
			</div>
		</div>
	</div>
<script>
	$(document).ready(function () {
        $("#main").find("> div > button.ok-btn").click(function () {
            var name=$.trim($("#info-person").find("> div:nth-child(2) > dl:nth-child(1) > dd > input").val());
            var work_state=$("#info-person").find("> div:nth-child(2) > dl:nth-child(2) > dd > span > input").attr("value");
            var gender="女";
            var city=$("#info-person").find("> div:nth-child(3) > dl:nth-child(2) > dd > input:nth-child(2)").val();
            var birth=$("#info-person").find("> div:nth-child(4) > dl:nth-child(1) > dd > input").val();
            var mobile=$("#info-person").find("> div:nth-child(4) > dl:nth-child(2) > dd > input").val();
            var email=$("#info-person").find("> div:nth-child(5) > dl > dd > input").val();
            var lowSalary=$("#main").find("> div > div:nth-child(6) > div:nth-child(2) > dl:nth-child(1) > dd > input").val();
            var workType=$("#main").find("> div > div:nth-child(6) > div:nth-child(2) > dl:nth-child(2) > dd > span > input").attr("value");
            var educations=[];
            var works=[];
            var skills=[];
            var languages=[];
            $("#info-experience").find("div").each(function (i,item) {
                var time=$(this).find("span:nth-child(3)").text();
                var a=time.indexOf("-");
                var start=time.substring(0,a);
                var end=time.substring(a+1);
                var edu={
                    startTime:start,
                    endTime:end,
                    name:$(this).find("span:first-child").text(),
                    major:$(this).find("span:nth-child(5)").text(),
                    actualDegree:$(this).find("span:nth-child(7)").text()
                };
                educations.push(edu);
            });
            $("#info-work").find("div").each(function(i,item){
                var time=$(this).find("span:nth-child(3)").text();
                var a=time.indexOf("-");
                var start=time.substring(0,a);
                var end=time.substring(a+1);
                var work={
                    enterpriseName:$(this).find("span:nth-child(1)").text(),
                    startTime:start,
                    endTime:end,
                    actualFunction:$(this).find("span:nth-child(5)").text(),
                    post:$(this).find("span:nth-child(7)").text(),
                    actualWorkType:$(this).find("span:nth-child(9)").text()
                };
                works.push(work);
            });
            $("#info-skill").find("div").each(function(i,item){
                var skill={
                    actualSkillName:$(this).find("span:nth-child(1)").text(),
                    time:$(this).find("span:nth-child(4)").text().replace(/[^0-9]/ig,""),
                    actualLevel:$(this).find("span:nth-child(6)").text()
                };
                skills.push(skill);
            });
            $("#info-language").find("div").each(function(i,item){
                var language={
                    actualLanguage:$(this).find("span:nth-child(1)").text(),
                    actualRwAbility:$(this).find("span:nth-child(4)").text(),
                    actualXAbility:$(this).find("span:nth-child(7)").text()
                };
                languages.push(language);
            });
            $.ajax({
                type:"post",
                url:"/applicant/saveResume",
                data:{
                    str_applicant:JSON.stringify({
                        name:name,
                        actualGender:gender,
                        actualDomicile:city,
                        actualWorkingStatus:work_state,
                        actualBirthdate:birth,
                        mobile:mobile,
                        email:email,
                        actualBirthdate:birth,
                        salaryLowerBound:lowSalary,
                        actualWorkType:workType}),
                    str_language:JSON.stringify(languages),
                    str_skill:JSON.stringify(skills),
                    str_workexp:JSON.stringify(works),
                    str_eduexp:JSON.stringify(educations)
                },
                success:function (data) {
                    if(data){DJMask.msg("保存成功");}
                },
                error:function () {
                    DJMask.msg("简历未成功保存,请检查网络配置...")
                }
            });
        });
        $.ajax({
            type:"get",
            url:"/company/resumeDetail",
            success:function (data) {
                $("#info-person > div:nth-child(2) > dl:nth-child(1) > dd > input").val(data.applicant.name);
                $("#info-person > div:nth-child(2) > dl:nth-child(2) > dd > span > input").val(data.applicant.actualWorkingStatus);
                $("#info-person > div:nth-child(3) > dl:nth-child(2) > dd > input:nth-child(2)").val(data.applicant.actualDomicile);
                $("#info-person > div:nth-child(4) > dl:nth-child(1) > dd > input").val(msTimeStampToDate2(data.applicant.birthdate));
                $("#info-person > div:nth-child(4) > dl:nth-child(2) > dd > input").val(data.applicant.mobile);
                $("#info-person > div:nth-child(5) > dl > dd > input").val(data.applicant.email);
                $("#main > div > div:nth-child(6) > div:nth-child(2) > dl:nth-child(1) > dd > input").val(data.applicant.salaryLowerBound);
                for(var d in data.educationList){
                    var content ="<div class='form-line'>"+
                        "<span>"+data.educationList[d].name+"</span>"+
                        "<em class='vline'></em>"+
                        "<span>"+data.educationList[d].startTime+"-"+data.educationList[d].endTime+"</span>"+
                        "<em class='vline'></em>"+
                        "<span>"+data.educationList[d].major+"</span>"+
                        "<em class='vline'></em>"+
                        "<span>"+data.educationList[d].actualDegree+"</span>"+
                        "</div>";
                    $(".form-line").empty();
                    $("#info-experience").find("div").remove();
                    $("#info-experience").append(content);
                }
                for(var d in data.workingList){
                    var content ="<div class=\"form-line\">\n" +
                        "\t\t\t\t\t<span>"+data.workingList[d].enterpriseName+"</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>"+data.workingList[d].startTime+" - "+data.workingList[d].endTime+"</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>"+data.workingList[d].actualFunction+"</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>职位: "+data.workingList[d].post+"</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>"+data.workingList[d].actualWorkType+"</span>\n" +
                        "\t\t\t\t</div>";
                    $("#info-work").find("div").remove();
                    $("#info-work").append(content);
                }
                $.each(data.skillList,function (i,item) {
                    var content="<div class=\"form-line\">\n" +
                        "\t\t\t\t\t<span>"+item.actualSkillName+"</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>使用时间：</span>\n" +
                        "\t\t\t\t\t<span>"+item.time+"年</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>"+item.actualLevel+"</span>\n" +
                        "\t\t\t\t</div>";
                    $("#info-skill").find("div").remove();
                    $("#info-skill").append(content);
                });
                $.each(data.languageList,function (i,item) {
                    var content="<div class=\"form-line\">\n" +
                        "\t\t\t\t\t<span>"+item.actualLanguage+"</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>读写能力：</span>\n" +
                        "\t\t\t\t\t<span>"+item.actualRwAbility+"</span>\n" +
                        "\t\t\t\t\t<em class=\"vline\"></em>\n" +
                        "\t\t\t\t\t<span>听说能力：</span>\n" +
                        "\t\t\t\t\t<span>"+item.actualXAbility+"</span>\n" +
                        "\t\t\t\t</div>";
                    $("#info-language").find("div").remove();
                    $("#info-language").append(content);
                });
            },
            error:function () {
                DJMask.msg("获取个人信息失败，请检查网络...");
            }
		});
    });
	$("#add-education").find("> div > div > dl:nth-child(2) > dd > input:nth-child(1)").datepicker();
	$("#add-education > div > div > dl:nth-child(2) > dd > input:nth-child(2)").datepicker();
	$("#add-work").find("> div > div > dl:nth-child(2) > dd > input:nth-child(1)").datepicker();
	$("#add-work").find("> div > div > dl:nth-child(2) > dd > input:nth-child(2)").datepicker();
	$("#info-person").find("> div:nth-child(4) > dl:nth-child(1) > dd > input").datepicker();
</script>
</body>
</html>

